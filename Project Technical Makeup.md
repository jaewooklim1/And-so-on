Title: Technical Documentation - User Model

Schema Information:

# == Schema Information

#

# Table name: users

#

# id :bigint not null, primary key

# email :string not null

# username :string not null

# password_digest :string not null

# session_token :string not null

#

Description:
The User model represents users of the application. It stores user information such as email, username, password digest (encrypted password), and session token for authentication and authorization purposes.

Attributes:

id (Primary Key): Unique identifier for each user, automatically generated by Rails.
email: User's email address, required and must be unique.
username: User's username, required and must be unique.
password_digest: Encrypted password stored using bcrypt for security, required.
session_token: Unique token generated for each user session, required for authentication.
Validations:

email, password_digest, and session_token must be present.
email must be unique.
Minimum password length is enforced (currently set to 6 characters).
Validation for password length with allowance for nil (useful for updating user attributes without changing the password).
Associations:

has_many :cart_products:

Relationship with Cart_Product model representing products added to the user's cart.
user_id foreign key is used to associate users with their cart products.
has_many :authored_reviews:

Relationship with Review model representing reviews authored by the user.
user_id foreign key is used to associate users with their authored reviews.
Callbacks:

after_initialize: Ensures that a session token is generated for each new user object after initialization.
Class Methods:

self.find_by_credentials(email, password):
Finds a user by email and verifies the password.
Returns the user object if credentials are valid, otherwise returns nil.
Instance Methods:

is_password?(password):

Compares the provided password with the stored password digest using bcrypt.
Returns true if the passwords match, false otherwise.
password=(password):

Setter method for the password attribute.
Encrypts and sets the password digest using bcrypt.
ensure_session_token:

Generates a session token if one doesn't already exist for the user.
reset_session_token!:

Resets the session token by generating a new random token.
Saves the updated session token to the database.
Conclusion:
The User model encapsulates user data, authentication logic, and associations with other models in the application. With validations, associations, and methods for password handling and session management, it provides essential functionality for user management within the Ruby on Rails application.
